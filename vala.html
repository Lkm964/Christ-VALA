<!doctype html>
<html lang="fr" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pour Chriss üíï</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&amp;family=Dancing+Script:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .font-romantic {
      font-family: 'Dancing Script', cursive;
    }

    .font-elegant {
      font-family: 'Playfair Display', serif;
    }

    /* Gradient background */
    .romantic-bg {
      background: linear-gradient(135deg, #1a0a0a 0%, #2d1515 25%, #3d1a1a 50%, #2d1515 75%, #1a0a0a 100%);
    }

    /* Heart glow animation */
    @keyframes heartGlow {
      0%, 100% {
        filter: drop-shadow(0 0 20px rgba(255, 105, 135, 0.6)) drop-shadow(0 0 40px rgba(255, 105, 135, 0.4));
        transform: scale(1) rotate(0deg);
      }
      25% {
        filter: drop-shadow(0 0 35px rgba(255, 105, 135, 0.8)) drop-shadow(0 0 70px rgba(255, 105, 135, 0.6));
        transform: scale(1.08) rotate(-2deg);
      }
      50% {
        filter: drop-shadow(0 0 40px rgba(255, 105, 135, 0.9)) drop-shadow(0 0 80px rgba(255, 105, 135, 0.7));
        transform: scale(1.12) rotate(2deg);
      }
      75% {
        filter: drop-shadow(0 0 35px rgba(255, 105, 135, 0.8)) drop-shadow(0 0 70px rgba(255, 105, 135, 0.6));
        transform: scale(1.08) rotate(-2deg);
      }
    }

    .heart-glow {
      animation: heartGlow 2.5s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
    }

    /* Floating hearts - Wave motion */
    @keyframes floatWave {
      0% {
        transform: translateY(100%) translateX(0) rotate(0deg) scale(0.8);
        opacity: 0;
      }
      10% {
        opacity: 1;
        transform: translateY(80%) translateX(20px) rotate(45deg) scale(1);
      }
      50% {
        transform: translateY(40%) translateX(-30px) rotate(180deg) scale(1.1);
      }
      90% {
        opacity: 1;
        transform: translateY(-80%) translateX(50px) rotate(315deg) scale(0.9);
      }
      100% {
        transform: translateY(-120%) translateX(0) rotate(360deg) scale(0);
        opacity: 0;
      }
    }

    .floating-heart {
      position: absolute;
      animation: floatWave linear infinite;
      pointer-events: none;
    }

    /* Sparkle animation - Twinkling */
    @keyframes twinkling {
      0%, 100% {
        opacity: 0;
        transform: scale(0) rotate(0deg);
      }
      25% {
        opacity: 0.8;
        transform: scale(1.2) rotate(90deg);
      }
      50% {
        opacity: 1;
        transform: scale(1) rotate(180deg);
      }
      75% {
        opacity: 0.6;
        transform: scale(0.8) rotate(270deg);
      }
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      animation: twinkling 3s ease-in-out infinite;
      box-shadow: 0 0 6px rgba(255, 255, 255, 0.8);
    }

    /* Typewriter effect */
    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .cursor {
      display: inline-block;
      width: 2px;
      height: 1em;
      background: #ff6b8a;
      margin-left: 2px;
      animation: blink 1s infinite;
    }

    /* Fade in animation */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in-up {
      animation: fadeInUp 1s ease-out forwards;
    }

    /* Petal fall animation - Spiral effect */
    @keyframes petalSpin {
      0% {
        transform: translateY(-10%) rotate(0deg) translateX(0) scale(1);
        opacity: 0;
      }
      10% {
        opacity: 0.9;
      }
      50% {
        transform: translateY(45%) rotate(360deg) translateX(60px) scale(1.1);
        opacity: 1;
      }
      100% {
        transform: translateY(115%) rotate(720deg) translateX(-40px) scale(0.5);
        opacity: 0;
      }
    }

    .petal {
      position: absolute;
      animation: petalSpin cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
      pointer-events: none;
    }

    /* Light orbs - Flowing motion */
    @keyframes floatOrbFlow {
      0%, 100% {
        transform: translateY(0) translateX(0);
        opacity: 0.2;
      }
      25% {
        transform: translateY(-40px) translateX(30px);
        opacity: 0.7;
      }
      50% {
        transform: translateY(-20px) translateX(-40px);
        opacity: 0.5;
      }
      75% {
        transform: translateY(-50px) translateX(20px);
        opacity: 0.6;
      }
    }

    .light-orb {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,182,193,0.8) 0%, rgba(255,105,135,0) 70%);
      animation: floatOrbFlow ease-in-out infinite;
      pointer-events: none;
    }

    /* Heart pulse on hover */
    .main-heart:hover {
      cursor: pointer;
    }

    .main-heart:hover svg {
      transform: scale(1.1);
      transition: transform 0.3s ease;
    }

    /* Name shimmer */
    @keyframes shimmer {
      0% {
        background-position: -200% center;
      }
      100% {
        background-position: 200% center;
      }
    }

    .shimmer-text {
      background: linear-gradient(90deg, #ff6b8a 0%, #ffb6c1 25%, #ffffff 50%, #ffb6c1 75%, #ff6b8a 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s linear infinite;
    }

    /* Scene transition */
    .scene-container {
      transition: opacity 0.8s ease-in-out;
    }

    /* Flower decoration */
    @keyframes sway {
      0%, 100% {
        transform: rotate(-5deg);
      }
      50% {
        transform: rotate(5deg);
      }
    }

    .flower {
      animation: sway 3s ease-in-out infinite;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full romantic-bg overflow-hidden">
  <div id="app" class="w-full h-full relative"><!-- SCENE 1: Initial Screen with Heart -->
   <div id="scene1" class="scene-container absolute inset-0 flex flex-col items-center justify-center"><!-- Ambient sparkles -->
    <div id="sparkles1" class="absolute inset-0 pointer-events-none"></div><!-- Light orbs background -->
    <div id="orbs1" class="absolute inset-0 pointer-events-none"></div><!-- Main content -->
    <div class="relative z-10 flex flex-col items-center"><!-- Subtle name above -->
     <p id="name-display" class="font-romantic text-2xl md:text-3xl shimmer-text mb-8 tracking-widest opacity-80">Pour Chriss üíï</p><!-- Main clickable heart -->
     <div class="main-heart heart-glow relative" onclick="revealLoveLetter()">
      <svg width="200" height="180" viewbox="0 0 200 180" class="transition-transform duration-300"><defs>
        <lineargradient id="heartGradient" x1="0%" y1="0%" x2="100%" y2="100%">
         <stop offset="0%" style="stop-color:#ff6b8a" />
         <stop offset="50%" style="stop-color:#e84a6f" />
         <stop offset="100%" style="stop-color:#c62f55" />
        </lineargradient>
        <filter id="glow">
         <fegaussianblur stddeviation="3" result="coloredBlur" />
         <femerge>
          <femergenode in="coloredBlur" />
          <femergenode in="SourceGraphic" />
         </femerge>
        </filter>
       </defs> <path d="M100 170 C20 110 0 70 0 50 C0 20 25 0 55 0 C75 0 90 15 100 30 C110 15 125 0 145 0 C175 0 200 20 200 50 C200 70 180 110 100 170Z" fill="url(#heartGradient)" filter="url(#glow)" /> <!-- Inner shine --> <ellipse cx="70" cy="50" rx="25" ry="20" fill="rgba(255,255,255,0.2)" />
      </svg><!-- Click indicator -->
      <div class="absolute -bottom-16 left-1/2 transform -translate-x-1/2 text-center">
       <p class="font-elegant text-pink-200 text-sm md:text-base opacity-70 animate-pulse">Clique sur mon c≈ìur üíï</p>
      </div>
     </div>
    </div><!-- Floating hearts in background -->
    <div id="floatingHearts1" class="absolute inset-0 pointer-events-none overflow-hidden"></div>
   </div><!-- SCENE 2: Love Letter Reveal -->
   <div id="scene2" class="scene-container absolute inset-0 flex flex-col items-center justify-center opacity-0 pointer-events-none"><!-- Magical background elements -->
    <div id="petals" class="absolute inset-0 pointer-events-none overflow-hidden"></div>
    <div id="floatingHearts2" class="absolute inset-0 pointer-events-none overflow-hidden"></div>
    <div id="sparkles2" class="absolute inset-0 pointer-events-none"></div>
    <div id="flowers" class="absolute inset-0 pointer-events-none"></div><!-- Light orbs -->
    <div id="orbs2" class="absolute inset-0 pointer-events-none"></div><!-- Love letter content -->
    <div class="relative z-10 max-w-2xl mx-4 md:mx-8 p-6 md:p-10 rounded-3xl bg-gradient-to-br from-white/10 to-pink-900/20 backdrop-blur-sm border border-pink-300/20 shadow-2xl"><!-- Decorative top -->
     <div class="absolute -top-6 left-1/2 transform -translate-x-1/2">
      <svg width="60" height="54" viewbox="0 0 200 180" class="drop-shadow-lg"><path d="M100 170 C20 110 0 70 0 50 C0 20 25 0 55 0 C75 0 90 15 100 30 C110 15 125 0 145 0 C175 0 200 20 200 50 C200 70 180 110 100 170Z" fill="#ff6b8a" />
      </svg>
     </div><!-- Header -->
     <div class="text-center mb-6 md:mb-8 fade-in-up" style="animation-delay: 0.2s;">
      <p id="letter-recipient" class="font-romantic text-3xl md:text-5xl text-pink-200 shimmer-text">Ma ch√®re Chriss</p>
      <div class="flex justify-center gap-2 mt-3"><span class="text-pink-400">‚ú¶</span> <span class="text-pink-300">‚ùÄ</span> <span class="text-pink-400">‚ú¶</span>
      </div>
     </div><!-- Typewriter message -->
     <div class="text-center fade-in-up" style="animation-delay: 0.5s;">
      <p id="love-message" class="font-elegant text-base md:text-xl text-pink-100 leading-relaxed md:leading-loose"><!-- Text will be typed here --></p><span id="cursor" class="cursor"></span>
     </div><!-- Signature -->
     <div id="signature" class="mt-6 md:mt-8 text-center opacity-0 transition-opacity duration-1000">
      <p class="font-romantic text-2xl md:text-3xl text-pink-300">Avec tout mon amour üíï</p>
      <div class="flex justify-center gap-3 mt-4"><span class="text-2xl">üåπ</span> <span class="text-2xl">üíù</span> <span class="text-2xl">üåπ</span>
      </div>
     </div><!-- Response Buttons -->
     <div id="response-buttons" class="mt-8 md:mt-10 flex flex-col md:flex-row gap-4 justify-center opacity-0 transition-all duration-1000 pointer-events-none"><button id="reject-btn" onclick="showRejection()" class="px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-romantic text-lg md:text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"> √áa ne me pla√Æt pas üò¢ </button> <button id="accept-btn" onclick="showAcceptance()" class="px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white font-romantic text-lg md:text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"> √áa me fait plaisir üíñ </button>
     </div>
    </div><!-- Bottom decorative hearts -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-4 opacity-60"><span class="text-pink-400 text-xl animate-pulse">üíó</span> <span class="text-pink-300 text-2xl animate-pulse" style="animation-delay: 0.3s;">üíñ</span> <span class="text-pink-400 text-xl animate-pulse" style="animation-delay: 0.6s;">üíó</span>
    </div>
   </div><!-- SCENE 3: Rejection Message -->
   <div id="scene3" class="scene-container absolute inset-0 flex flex-col items-center justify-center opacity-0 pointer-events-none overflow-y-auto"><!-- Sad sparkles -->
    <div id="sparkles3" class="absolute inset-0 pointer-events-none"></div><!-- Rejection content -->
    <div class="relative z-10 max-w-2xl mx-4 md:mx-8 p-6 md:p-10 rounded-3xl bg-gradient-to-br from-gray-900/20 to-blue-900/20 backdrop-blur-sm border border-blue-300/20 shadow-2xl my-8 text-center"><!-- Sad emoji -->
     <div class="text-6xl md:text-8xl mb-6">
      üò¢
     </div><!-- Rejection message -->
     <p id="rejection-text" class="font-elegant text-lg md:text-2xl text-blue-200 leading-relaxed mb-6"><!-- Rejection message will appear here --></p><!-- Signature -->
     <p class="font-romantic text-2xl md:text-3xl text-blue-300 mt-8">Je comprends...</p><!-- Back button --> <button onclick="goBack()" class="mt-8 px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-romantic text-lg md:text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"> Revenir üîô </button>
    </div>
   </div><!-- SCENE 4: Acceptance Message -->
   <div id="scene4" class="scene-container absolute inset-0 flex flex-col items-center justify-center opacity-0 pointer-events-none overflow-y-auto"><!-- Celebration sparkles -->
    <div id="sparkles4" class="absolute inset-0 pointer-events-none"></div>
    <div id="petals4" class="absolute inset-0 pointer-events-none overflow-hidden"></div><!-- Acceptance content -->
    <div class="relative z-10 max-w-2xl mx-4 md:mx-8 p-6 md:p-10 rounded-3xl bg-gradient-to-br from-pink-900/30 to-red-900/30 backdrop-blur-sm border border-pink-300/30 shadow-2xl my-8 text-center"><!-- Happy emoji -->
     <div class="text-6xl md:text-8xl mb-6">
      üéâ
     </div><!-- Acceptance message -->
     <p id="acceptance-text" class="font-elegant text-lg md:text-2xl text-pink-200 leading-relaxed mb-6"><!-- Acceptance message will appear here --></p><!-- Signature -->
     <p class="font-romantic text-2xl md:text-3xl text-pink-300 mt-8">Tu me rends si heureux! üíï</p><!-- Decorative hearts -->
     <div class="flex justify-center gap-4 mt-6 text-3xl md:text-5xl"><span class="animate-bounce" style="animation-delay: 0s;">üíï</span> <span class="animate-bounce" style="animation-delay: 0.2s;">üíñ</span> <span class="animate-bounce" style="animation-delay: 0.4s;">üíï</span>
     </div><!-- Back button --> <button onclick="goBack()" class="mt-8 px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white font-romantic text-lg md:text-xl transition-all duration-300 transform hover:scale-105 shadow-lg"> Revenir üîô </button>
    </div>
   </div>
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      recipient_name: 'Chriss',
      love_message: 'Chriss, mon amour... Tu es la lumi√®re qui guide mon chemin, la raison pour laquelle mon c≈ìur bat si fort. Chaque moment avec toi est magique, chaque sourire de ta part me rend plus vivant. Tu m\'as transform√©, tu m\'as montr√© ce que c\'est d\'aimer vraiment. En cette Saint-Valentin, je veux que tu saches que tu es mon univers, mon √©ternit√©, ma plus belle histoire. Je t\'aime infiniment, Chriss. √Ä jamais.',
      rejection_message: 'Je suis vraiment triste... Mon c≈ìur esp√©rait tant. Mais je respecte tes sentiments. M√™me si cela me brise, j\'accepte ta d√©cision. Je serais toujours l√† pour toi, m√™me juste en ami. Je ne cesserai jamais de t\'aimer, Chriss.',
      acceptance_message: 'Je suis le plus heureux du monde ! Mon c≈ìur explose de joie ! Avec toi, je veux vivre les plus belles histoires d\'amour. Chaque jour avec toi sera un merveilleux cadeau. Tu es mon r√™ve devenu r√©alit√©, mon amour √©ternel. Merci d\'avoir dit oui √† mon c≈ìur ! üåπ',
      primary_color: '#ff6b8a',
      secondary_color: '#ffb6c1',
      text_color: '#fce7f3',
      background_color: '#2d1515',
      accent_color: '#e84a6f'
    };

    let config = { ...defaultConfig };
    let isRevealed = false;
    let typewriterTimeout = null;

    // Initialize SDK
    window.elementSdk.init({
      defaultConfig,
      onConfigChange: async (newConfig) => {
        config = { ...defaultConfig, ...newConfig };
        updateUI();
      },
      mapToCapabilities: (cfg) => ({
        recolorables: [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              cfg.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => cfg.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              cfg.secondary_color = value;
              window.elementSdk.setConfig({ secondary_color: value });
            }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              cfg.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => cfg.primary_color || defaultConfig.primary_color,
            set: (value) => {
              cfg.primary_color = value;
              window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => cfg.accent_color || defaultConfig.accent_color,
            set: (value) => {
              cfg.accent_color = value;
              window.elementSdk.setConfig({ accent_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      }),
      mapToEditPanelValues: (cfg) => new Map([
        ['recipient_name', cfg.recipient_name || defaultConfig.recipient_name],
        ['love_message', cfg.love_message || defaultConfig.love_message],
        ['rejection_message', cfg.rejection_message || defaultConfig.rejection_message],
        ['acceptance_message', cfg.acceptance_message || defaultConfig.acceptance_message]
      ])
    });

    function updateUI() {
      const name = config.recipient_name || defaultConfig.recipient_name;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const bgColor = config.background_color || defaultConfig.background_color;
      const accentColor = config.accent_color || defaultConfig.accent_color;

      // Update name displays
      document.getElementById('name-display').textContent = `Pour ${name}`;
      document.getElementById('letter-recipient').textContent = `Ma ch√®re ${name}`;

      // Update colors
      document.body.style.background = `linear-gradient(135deg, ${adjustColor(bgColor, -20)} 0%, ${bgColor} 25%, ${adjustColor(bgColor, 10)} 50%, ${bgColor} 75%, ${adjustColor(bgColor, -20)} 100%)`;
      
      // Update heart gradient
      const heartGradient = document.getElementById('heartGradient');
      if (heartGradient) {
        heartGradient.innerHTML = `
          <stop offset="0%" style="stop-color:${primaryColor}"/>
          <stop offset="50%" style="stop-color:${accentColor}"/>
          <stop offset="100%" style="stop-color:${adjustColor(accentColor, -20)}"/>
        `;
      }

      // Update text colors
      document.querySelectorAll('.text-pink-100, .text-pink-200').forEach(el => {
        el.style.color = textColor;
      });

      document.querySelectorAll('.text-pink-300, .text-pink-400').forEach(el => {
        el.style.color = secondaryColor;
      });

      // Update shimmer gradient
      document.querySelectorAll('.shimmer-text').forEach(el => {
        el.style.background = `linear-gradient(90deg, ${primaryColor} 0%, ${secondaryColor} 25%, #ffffff 50%, ${secondaryColor} 75%, ${primaryColor} 100%)`;
        el.style.backgroundSize = '200% auto';
        el.style.webkitBackgroundClip = 'text';
        el.style.backgroundClip = 'text';
        el.style.webkitTextFillColor = 'transparent';
      });

      // Update cursor color
      const cursor = document.getElementById('cursor');
      if (cursor) {
        cursor.style.background = primaryColor;
      }
    }

    function adjustColor(hex, percent) {
      const num = parseInt(hex.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = Math.max(0, Math.min(255, (num >> 16) + amt));
      const G = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amt));
      const B = Math.max(0, Math.min(255, (num & 0x0000FF) + amt));
      return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }

    // Create ambient effects
    function createSparkles(containerId, count) {
      const container = document.getElementById(containerId);
      if (!container) return;
      container.innerHTML = '';
      
      for (let i = 0; i < count; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.left = Math.random() * 100 + '%';
        sparkle.style.top = Math.random() * 100 + '%';
        sparkle.style.animationDelay = Math.random() * 2 + 's';
        sparkle.style.width = (Math.random() * 3 + 2) + 'px';
        sparkle.style.height = sparkle.style.width;
        container.appendChild(sparkle);
      }
    }

    function createLightOrbs(containerId, count) {
      const container = document.getElementById(containerId);
      if (!container) return;
      container.innerHTML = '';
      
      for (let i = 0; i < count; i++) {
        const orb = document.createElement('div');
        orb.className = 'light-orb';
        const size = Math.random() * 100 + 50;
        orb.style.width = size + 'px';
        orb.style.height = size + 'px';
        orb.style.left = Math.random() * 100 + '%';
        orb.style.top = Math.random() * 100 + '%';
        orb.style.animationDelay = Math.random() * 4 + 's';
        orb.style.animationDuration = (Math.random() * 3 + 3) + 's';
        container.appendChild(orb);
      }
    }

    function createFloatingHearts(containerId, count) {
      const container = document.getElementById(containerId);
      if (!container) return;
      container.innerHTML = '';
      
      const hearts = ['üíï', 'üíó', 'üíñ', 'üíù', 'ÔøΩÔøΩÔøΩÔøΩ', 'üíì'];
      
      for (let i = 0; i < count; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
        heart.style.animationDuration = (Math.random() * 10 + 10) + 's';
        heart.style.animationDelay = Math.random() * 10 + 's';
        heart.style.opacity = Math.random() * 0.5 + 0.3;
        container.appendChild(heart);
      }
    }

    function createPetals(count) {
      const container = document.getElementById('petals');
      if (!container) return;
      container.innerHTML = '';
      
      const petalColors = ['#ffb6c1', '#ff69b4', '#ff1493', '#ffc0cb', '#fff0f5'];
      
      for (let i = 0; i < count; i++) {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.innerHTML = 'üå∏';
        petal.style.left = Math.random() * 100 + '%';
        petal.style.fontSize = (Math.random() * 15 + 10) + 'px';
        petal.style.animationDuration = (Math.random() * 8 + 8) + 's';
        petal.style.animationDelay = Math.random() * 8 + 's';
        container.appendChild(petal);
      }
    }

    function createFlowers() {
      const container = document.getElementById('flowers');
      if (!container) return;
      container.innerHTML = '';
      
      const flowers = ['üåπ', 'üå∑', 'üå∫', 'üå∏', 'üíê'];
      const positions = [
        { left: '5%', bottom: '10%' },
        { right: '5%', bottom: '10%' },
        { left: '10%', top: '15%' },
        { right: '10%', top: '15%' }
      ];
      
      positions.forEach((pos, i) => {
        const flower = document.createElement('div');
        flower.className = 'flower absolute text-3xl md:text-4xl opacity-60';
        flower.textContent = flowers[i % flowers.length];
        Object.assign(flower.style, pos);
        flower.style.animationDelay = (i * 0.5) + 's';
        container.appendChild(flower);
      });
    }

    // Typewriter effect
    function typeWriter(text, elementId, speed = 50) {
      const element = document.getElementById(elementId);
      if (!element) return;
      
      element.textContent = '';
      let i = 0;
      
      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          typewriterTimeout = setTimeout(type, speed);
        } else {
          // Hide cursor and show signature
          const cursor = document.getElementById('cursor');
          if (cursor) cursor.style.display = 'none';
          
          const signature = document.getElementById('signature');
          const buttons = document.getElementById('response-buttons');
          
          if (signature) {
            setTimeout(() => {
              signature.style.opacity = '1';
              if (buttons) {
                buttons.classList.remove('pointer-events-none');
                buttons.style.opacity = '1';
              }
            }, 500);
          }
        }
      }
      
      type();
    }

    // Reveal love letter
    function revealLoveLetter() {
      if (isRevealed) return;
      isRevealed = true;

      const scene1 = document.getElementById('scene1');
      const scene2 = document.getElementById('scene2');
      
      // Fade out scene 1
      scene1.style.opacity = '0';
      scene1.style.pointerEvents = 'none';
      
      // Wait for fade, then show scene 2
      setTimeout(() => {
        scene2.style.opacity = '1';
        scene2.style.pointerEvents = 'auto';
        
        // Create magical effects
        createPetals(30);
        createFloatingHearts('floatingHearts2', 25);
        createSparkles('sparkles2', 40);
        createLightOrbs('orbs2', 8);
        createFlowers();
        
        // Start typewriter after a delay
        setTimeout(() => {
          const message = config.love_message || defaultConfig.love_message;
          typeWriter(message, 'love-message', 40);
        }, 800);
        
      }, 800);
    }

    // Show rejection message
    function showRejection() {
      const scene2 = document.getElementById('scene2');
      const scene3 = document.getElementById('scene3');
      
      scene2.style.opacity = '0';
      scene2.style.pointerEvents = 'none';
      
      setTimeout(() => {
        scene3.style.opacity = '1';
        scene3.style.pointerEvents = 'auto';
        
        createSparkles('sparkles3', 30);
        
        // Show rejection message with typewriter
        const rejectionMsg = config.rejection_message || defaultConfig.rejection_message;
        document.getElementById('rejection-text').textContent = rejectionMsg;
      }, 800);
    }

    // Show acceptance message
    function showAcceptance() {
      const scene2 = document.getElementById('scene2');
      const scene4 = document.getElementById('scene4');
      
      scene2.style.opacity = '0';
      scene2.style.pointerEvents = 'none';
      
      setTimeout(() => {
        scene4.style.opacity = '1';
        scene4.style.pointerEvents = 'auto';
        
        createSparkles('sparkles4', 50);
        createPetals(40);
        
        // Show acceptance message with typewriter
        const acceptanceMsg = config.acceptance_message || defaultConfig.acceptance_message;
        document.getElementById('acceptance-text').textContent = acceptanceMsg;
      }, 800);
    }

    // Go back function
    function goBack() {
      const scene3 = document.getElementById('scene3');
      const scene4 = document.getElementById('scene4');
      const scene2 = document.getElementById('scene2');
      
      scene3.style.opacity = '0';
      scene3.style.pointerEvents = 'none';
      scene4.style.opacity = '0';
      scene4.style.pointerEvents = 'none';
      
      setTimeout(() => {
        scene2.style.opacity = '1';
        scene2.style.pointerEvents = 'auto';
      }, 800);
    }

    // Initialize scene 1 effects
    function initScene1() {
      createSparkles('sparkles1', 20);
      createLightOrbs('orbs1', 5);
      createFloatingHearts('floatingHearts1', 15);
    }

    // Initialize
    initScene1();
    updateUI();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cbdf123c7863ea6',t:'MTc3MDc1MDk5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>